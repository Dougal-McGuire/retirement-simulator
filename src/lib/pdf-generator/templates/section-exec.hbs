<div id="executive-summary" class="page-break">
  <h1>{{t 'pdf.exec.title'}}</h1>
  
  <div class="content">
    <p>
      {{t 'pdf.exec.intro' years=projections.milestones.length runs=assumptions.mcRuns}}
    </p>
    
    <div class="kpi-grid">
      {{> kpi-tile 
        value=(concat summary.planHealthScore "/100")
        label=(t 'pdf.exec.kpis.planHealth.label' label=summary.planHealthLabelText)
        note=summary.planHealthWhyText
      }}
      {{> kpi-tile 
        value=(formatPercent projections.successRatePct)
        label=(t 'pdf.exec.kpis.successProbability.label')
        badge=(successBadgeLabel projections.successRatePct)
        badgeColor=(getSuccessBadgeColor projections.successRatePct)
        note=(t 'pdf.exec.kpis.successProbability.note' rate=projections.successRatePct runs=assumptions.mcRuns age=person.horizonAge)
      }}
      
      {{> kpi-tile 
        value=(formatEUR finances.currentAssetsEUR)
        label=(t 'pdf.exec.kpis.currentAssets.label')
        note=(t 'pdf.exec.kpis.currentAssets.note')
      }}
      
      {{> kpi-tile 
        value=(formatEUR finances.annualSavingsEUR)
        label=(t 'pdf.exec.kpis.annualSavings.label')
        note=(t 'pdf.exec.kpis.annualSavings.note')
      }}
      
      {{> kpi-tile 
        value=(formatEUR finances.expectedMonthlyPensionEUR)
        label=(t 'pdf.exec.kpis.monthlyPension.label')
        note=(t 'pdf.exec.kpis.monthlyPension.note' age=person.pensionAge)
      }}

      {{> kpi-tile 
        value=(formatEUR (getTotalAnnualSpending spending))
        label=(t 'pdf.exec.kpis.totalSpending.label')
        note=(t 'pdf.exec.kpis.totalSpending.note')
      }}
      {{#if summary.bridge}}
      {{> kpi-tile 
        value=(formatEUR summary.bridge.cashNeedEUR)
        label=(t 'pdf.exec.kpis.bridge.label' start=summary.bridge.startAge end=summary.bridge.endAge)
        note=(t 'pdf.exec.kpis.bridge.note' portfolio=summary.bridge.portfolioSharePct years=summary.bridge.cashBucketYears)
      }}
      {{/if}}
    </div>
    
    <div class="callout callout-info">
      <div class="callout-title">{{t 'pdf.exec.keyFindings.title'}}</div>
      <ul>
        <li>
          {{t 'pdf.exec.keyFindings.planHealth.label'}}
          <strong>{{summary.planHealthScore}}/100 ({{summary.planHealthLabelText}})</strong>
          — {{summary.planHealthWhyText}}
        </li>
        <li>
          {{t 'pdf.exec.keyFindings.successProbability.label'}}
          <strong>{{formatPercent projections.successRatePct}}</strong>
          — {{t 'pdf.exec.keyFindings.successProbability.detail' rate=projections.successRatePct runs=assumptions.mcRuns age=person.horizonAge}}
        </li>
        {{#if summary.bridge}}
        <li>
          {{t 'pdf.exec.keyFindings.bridge.label' start=summary.bridge.startAge end=summary.bridge.endAge}}
          <strong>{{formatEUR summary.bridge.cashNeedEUR}}</strong>
          — {{t 'pdf.exec.keyFindings.bridge.detail' portfolio=summary.bridge.portfolioSharePct years=summary.bridge.cashBucketYears}}
        </li>
        {{/if}}
        <li>
          {{t 'pdf.exec.keyFindings.retirementCountdown' years=(subtract person.retireAge person.currentAge)}}
        </li>
      </ul>
    </div>

    {{#if summary.topActionsDetailed}}
    <div class="callout callout-warning">
      <div class="callout-title">{{t 'pdf.exec.nextSteps.title'}}</div>
      <ul>
        {{#each summary.topActionsDetailed}}
          <li>{{this.titleText}} → <strong>{{this.upliftRangeText}}</strong></li>
        {{/each}}
      </ul>
    </div>
    {{/if}}
  </div>
</div>
