<div id="assets" class="page-break">
  <h1>{{t 'pdf.assets.title'}}</h1>
  
  <div class="content">
    <p>{{t 'pdf.assets.intro'}}</p>
    
    <h2 id="assets-over-time">{{t 'pdf.assets.overTime.title'}}</h2>
    
    <figure class="avoid-break" data-fig="assets-projection" aria-label="{{t 'pdf.assets.overTime.chartAria'}}">
      {{{assetsChart}}}
      <figcaption>{{t 'pdf.assets.overTime.caption' figure=(figureNumber 1)}}</figcaption>
    </figure>
    
    <h2 id="assets-milestones">{{t 'pdf.assets.milestones.title'}}</h2>
    
    <table class="avoid-break" aria-label="{{t 'pdf.assets.milestones.aria'}}">
      <thead>
        <tr>
          <th>{{t 'pdf.assets.milestones.headers.age'}}</th>
          <th>{{t 'pdf.assets.milestones.headers.p10'}}</th>
          <th>{{t 'pdf.assets.milestones.headers.p50'}}</th>
          <th>{{t 'pdf.assets.milestones.headers.p90'}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each projections.milestones}}
        <tr{{#if (isRetirementAge this.age ../person.retireAge)}} style="background: var(--line); font-weight: 600;"{{/if}}>
          <td>
            {{this.age}}
            {{#if (isRetirementAge this.age ../person.retireAge)}}
              ({{t 'pdf.assets.milestones.retirementLabel'}})
            {{/if}}
          </td>
          <td>{{formatEUR this.p10}}</td>
          <td>{{formatEUR this.p50}}</td>
          <td>{{formatEUR this.p90}}</td>
        </tr>
        {{/each}}
      </tbody>
    </table>
    
    <h2 id="assets-success">{{t 'pdf.assets.success.title'}}</h2>
    
    <div class="kpi-grid">
      {{> kpi-tile 
        value=(formatPercent projections.successRatePct)
        label=(t 'pdf.assets.success.kpis.overall.label')
        badge=(successBadgeLabel projections.successRatePct)
        badgeColor=(getSuccessBadgeColor projections.successRatePct)
        note=(t 'pdf.assets.success.kpis.overall.note')
      }}
      
      {{> kpi-tile 
        value=(formatNumber (getFailureCount assumptions.mcRuns projections.successRatePct))
        label=(t 'pdf.assets.success.kpis.failed.label')
        note=(t 'pdf.assets.success.kpis.failed.note' runs=assumptions.mcRuns)
      }}
    </div>
    
    <h2 id="assets-phases">{{t 'pdf.assets.phases.title'}}</h2>
    
    <div class="callout callout-info">
      <div class="callout-title">{{t 'pdf.assets.phases.accumulation.title' start=person.currentAge end=(subtract person.retireAge 1)}}</div>
      <ul>
        <li>{{t 'pdf.assets.phases.accumulation.duration' years=(subtract person.retireAge person.currentAge)}}</li>
        <li>{{t 'pdf.assets.phases.accumulation.annualContribution' amount=finances.annualSavingsEUR}}</li>
        <li>{{t 'pdf.assets.phases.accumulation.totalContribution' amount=(multiply finances.annualSavingsEUR (subtract person.retireAge person.currentAge))}}</li>
        <li>{{t 'pdf.assets.phases.accumulation.compound'}}</li>
      </ul>
    </div>
    
    <div class="callout callout-warning">
      <div class="callout-title">{{t 'pdf.assets.phases.distribution.title' start=person.retireAge end=person.horizonAge}}</div>
      <ul>
        <li>{{t 'pdf.assets.phases.distribution.duration' years=(subtract person.horizonAge person.retireAge)}}</li>
        <li>{{t 'pdf.assets.phases.distribution.annualSpending' amount=(getTotalAnnualSpending spending)}}</li>
        <li>{{t 'pdf.assets.phases.distribution.pensionIncome' age=person.pensionAge amount=(multiply finances.expectedMonthlyPensionEUR 12)}}</li>
        <li>{{t 'pdf.assets.phases.distribution.gapYears' start=person.retireAge end=(subtract person.pensionAge 1)}}</li>
      </ul>
    </div>
    
    <h2 id="assets-stats">{{t 'pdf.assets.stats.title'}}</h2>
    
    <table class="avoid-break" aria-label="{{t 'pdf.assets.stats.aria'}}">
      <thead>
        <tr>
          <th>{{t 'pdf.assets.stats.headers.metric'}}</th>
          <th>{{t 'pdf.assets.stats.headers.atRetirement' age=person.retireAge}}</th>
          <th>{{t 'pdf.assets.stats.headers.atHorizon' age=person.horizonAge}}</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{t 'pdf.assets.stats.rows.median'}}</td>
          <td>{{formatEUR (getRetirementMedian projections person)}}</td>
          <td>{{formatEUR (getFinalMedian projections)}}</td>
        </tr>
        <tr>
          <td>{{t 'pdf.assets.stats.rows.p90'}}</td>
          <td>{{formatEUR (getRetirement90th projections person)}}</td>
          <td>{{formatEUR (getFinal90th projections)}}</td>
        </tr>
        <tr>
          <td>{{t 'pdf.assets.stats.rows.p10'}}</td>
          <td>{{formatEUR (getRetirement10th projections person)}}</td>
          <td>{{formatEUR (getFinal10th projections)}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
